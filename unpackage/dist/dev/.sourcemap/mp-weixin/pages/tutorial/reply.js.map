{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/win10/Documents/HBuilderProjects/dream-main/pages/tutorial/reply.vue?c03e","webpack:///C:/Users/win10/Documents/HBuilderProjects/dream-main/pages/tutorial/reply.vue?6775","webpack:///C:/Users/win10/Documents/HBuilderProjects/dream-main/pages/tutorial/reply.vue?f457","uni-app:///pages/tutorial/reply.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;AACnB;AACA,gG;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvGA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoGnnB,wF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,S,CAAA;AACA,O,CAAA;eACA,EACA,IADA,kBACA,CACA,SACA,WADA,EAEA,WAFA,EAGA,mBACA,aADA,EACA;AACA,uBAFA,EAEA;AACA,qBAHA,EAGA;AACA,2BAJA,EAHA,EASA,YATA,EASA;AACA,kBAVA,EAUA;AACA,cAXA,EAWA;AACA,oBAZA,EAYA;AACA,mBAbA,EAaA;AACA,kBAdA,GAgBA,CAlBA,EAmBA,MAnBA,oBAmBA,sFACA,YACA,aACA,uBACA,iGACA,gBACA,mBACA,CAHA,MAGA,CACA,iBACA,iCADA,IAGA,CACA,CA/BA,EAgCA,YAhCA,wBAgCA,CAhCA,EAgCA,CACA,6BACA,CAlCA,EAmCA;AACA,mBApCA,+BAoCA,CACA,wBACA,0BACA,CAFA,EAEA,IAFA,EAGA,CAxCA,EAyCA,MAzCA,oBAyCA,CACA,4BACA,iCADA,IAGA,CA7CA,EA8CA;AACA,eA/CA,yBA+CA,OA/CA,EA+CA,CACA,gBACA,CAjDA,EAkDA,WACA;AACA,eAFA,yBAEA,CACA,kBACA,iCADA,EAEA,eAFA,EAGA,QACA,aACA,mCADA,EAEA,uBAFA,EAGA,SAHA,EADA,EAMA,YACA,mBADA,EAEA,cAFA,GANA,EAHA,EAcA,OAdA,mBAcA,GAdA,EAcA,CACA,iBACA,mCACA,2BACA,CAFA,MAEA,EACA,CAnBA,IAqBA,CAxBA,EAyBA;AACA,mBA1BA,6BA0BA,CACA,mDACA,mBACA,mCADA,EAEA,WAFA,IAIA,CALA,EAMA,CAjCA,EAkCA;AACA,WAnCA,mBAmCA,KAnCA,EAmCA,CACA,+BACA,6DACA,2CACA,gCACA,CAFA,MAEA,CACA,gCACA,CACA,CAPA,MAOA,CACA,kCACA,2CACA,uBACA,CAHA,MAGA,CACA,2CACA,uBACA,CACA,CACA,CApDA,EAqDA;AACA,YAtDA,sBAsDA,CACA,mBACA,iBACA,gBACA,CACA,CA3DA,EA4DA;AACA,YA7DA,sBA6DA,CACA,kBACA,qCADA;AAEA,uBAFA;AAGA;AACA;AACA,uCADA;AAEA,6DAFA;AAGA,mCAHA;AAIA,qBAJA,EADA;;AAOA;AACA,+BADA;AAEA,0BAFA,GAPA;;AAWA,mCAXA,EAWA;AACA,iCAZA,CAYA;AAZA,SAHA;AAiBA,eAjBA,mBAiBA,GAjBA,EAiBA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA,SAxBA;;AA0BA,KAxFA;AAyFA;AACA,oBA1FA,4BA0FA,WA1FA,EA0FA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA,KApGA;AAqGA;AACA,0BAtGA,oCAsGA;AACA;AACA;AACA,+BADA,EACA;AACA,yDAFA,EAEA;AACA,mCAHA;AAIA,0CAJA;AAKA,iDALA;;AAOA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,uBAFA;AAGA,oBAHA;AAIA,eAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA;AACA;AACA;AACA,SAVA;;AAYA,KApIA;AAqIA;AACA,wBAtIA,kCAsIA;AACA;AACA,qBADA,EACA;AACA,uBAFA,EAEA;AACA,qBAHA,EAGA;AACA,2BAJA;;AAMA,KA7IA,EAlDA,E","file":"pages/tutorial/reply.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/tutorial/reply.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./reply.vue?vue&type=template&id=2e516132&\"\nvar renderjs\nimport script from \"./reply.vue?vue&type=script&lang=js&\"\nexport * from \"./reply.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tutorial/reply.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./reply.vue?vue&type=template&id=2e516132&\"","var components\ntry {\n  components = {\n    uAvatar: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-avatar/u-avatar\" */ \"uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-popup/u-popup\" */ \"uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-input/u-input\" */ \"uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uBadge: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-badge/u-badge\" */ \"uview-ui/components/u-badge/u-badge.vue\"\n      )\n    },\n    uBackTop: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-back-top/u-back-top\" */ \"uview-ui/components/u-back-top/u-back-top.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.vk.pubfn.isNotNull(_vm.comment.author)\n  var g1 = _vm.vk.pubfn.isNotNull(_vm.comment.author)\n  var g2 = _vm.vk.pubfn.dateDiff(_vm.comment._add_time)\n  var g3 = _vm.vk.pubfn.isNotNull(_vm.comment.isLikeList)\n  var g4 = _vm.vk.pubfn.isNotNull(_vm.comment.isLikeList)\n\n  var l0 = _vm.__map(_vm.replyList, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var g5 = _vm.vk.pubfn.isNotNull(item.author)\n    var g6 = _vm.vk.pubfn.isNotNull(item.author)\n    var g7 = _vm.vk.pubfn.dateDiff(item._add_time)\n    var g8 = _vm.vk.pubfn.isNotNull(item.isLikeList)\n    var g9 = _vm.vk.pubfn.isNotNull(item.isLikeList)\n    var g10 = _vm.vk.pubfn.isNotNull(item.reply._id)\n    var g11 = g10 ? _vm.vk.pubfn.isNotNull(item.reply.author) : null\n    return {\n      $orig: $orig,\n      g5: g5,\n      g6: g6,\n      g7: g7,\n      g8: g8,\n      g9: g9,\n      g10: g10,\n      g11: g11\n    }\n  })\n\n  var g12 = _vm.vk.pubfn.isNotNull(_vm.comment.isLikeList)\n  var g13 = _vm.vk.pubfn.isNotNull(_vm.comment.isLikeList)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        l0: l0,\n        g12: g12,\n        g13: g13\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./reply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./reply.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"detailCompontent\">\r\n\t\t<view class=\"commentReply\">\r\n\t\t\t<view class=\"top\">\r\n\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t<view class=\"heart-photo\">\r\n\t\t\t\t\t\t<u-avatar v-if=\"vk.pubfn.isNotNull(comment.author)\" :src=\"comment.author.avatar\">\r\n\t\t\t\t\t\t</u-avatar>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t\t<view class=\"name\">{{ vk.pubfn.isNotNull(comment.author)?comment.author.nickname:'匿名' }}</view>\r\n\t\t\t\t\t\t<view class=\"date\">{{vk.pubfn.dateDiff(comment._add_time)}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right\" :class=\"{ highlight: vk.pubfn.isNotNull(comment.isLikeList) }\">\r\n\t\t\t\t\t{{ comment.loveNumber }}\r\n\t\t\t\t\t<u-icon v-if=\"!vk.pubfn.isNotNull(comment.isLikeList)\" name=\"thumb-up\" class=\"like\" color=\"#9a9a9a\"\r\n\t\t\t\t\t\t:size=\"30\" @click=\"getLike(comment.isLikeList._id)\"></u-icon>\r\n\t\t\t\t\t<u-icon v-else name=\"thumb-up-fill\" class=\"like\" :size=\"30\"\r\n\t\t\t\t\t\t@click=\"delLike(comment._id,comment.isLikeList._id)\">\r\n\t\t\t\t\t</u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"content\">{{ comment.commentText }}</view>\r\n\t\t</view>\r\n\t\t<view class=\"all-reply\">\r\n\t\t\t<view class=\"all-reply-top\">全部回复（{{ total||0 }}）</view>\r\n\t\t\t<view class=\"item\" v-for=\"(item, index) in replyList\" :key=\"index\">\r\n\t\t\t\t<view class=\"commentReply\">\r\n\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t<view class=\"heart-photo\">\r\n\t\t\t\t\t\t\t\t<u-avatar v-if=\"vk.pubfn.isNotNull(item.author)\" :src=\"item.author.avatar\" :size=\"64\">\r\n\t\t\t\t\t\t\t\t</u-avatar>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t\t\t\t<view class=\"name\">{{ vk.pubfn.isNotNull(item.author)?item.author.nickname:'匿名' }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"date\">{{vk.pubfn.dateDiff(item._add_time)}}\r\n\t\t\t\t\t\t\t\t\t<view class=\"replyButton\" @click=\"replyCommentFunc(item)\">回复</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"right\" :class=\"{ highlight: vk.pubfn.isNotNull(item.isLikeList)}\">\r\n\t\t\t\t\t\t\t<view class=\"num\">{{ item.loveNumber }}</view>\r\n\t\t\t\t\t\t\t<u-icon v-if=\"!vk.pubfn.isNotNull(item.isLikeList)\" name=\"thumb-up\" class=\"like\" :size=\"30\"\r\n\t\t\t\t\t\t\t\tcolor=\"#9a9a9a\" @click=\"getLike(item.isLikeList._id)\"></u-icon>\r\n\t\t\t\t\t\t\t<u-icon v-else name=\"thumb-up-fill\" class=\"like\" :size=\"30\"\r\n\t\t\t\t\t\t\t\t@click=\"delLike(item._id,item.isLikeList._id)\"></u-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"reply\" v-if=\"vk.pubfn.isNotNull(item.reply._id)\">\r\n\t\t\t\t\t\t<view class=\"username\">\r\n\t\t\t\t\t\t\t{{ vk.pubfn.isNotNull(item.reply.author)?item.reply.author.nickname:'匿名' }}:</view>\r\n\t\t\t\t\t\t<view class=\"text\">{{ item.reply.commentText }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"content\">{{ item.commentText }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<u-popup v-model=\"addCommentPopup.status\" mode=\"bottom\" border-radius=\"14\" height=\"180\">\r\n\t\t\t<view class=\"addCommentPopup\">\r\n\t\t\t\t<view class=\"issureCommentText\">\r\n\t\t\t\t\t<u-input v-model=\"addCommentPopup.replyText\" type=\"textarea\" :border=\"false\" :height=\"100\"\r\n\t\t\t\t\t\t:auto-height=\"true\" :focus=\"true\" :placeholder=\"addCommentPopup.placeholder\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"issureCommentButton\" @click=\"replyCommentSubmitFunc()\">发表</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t\t<view class=\"operationNavigation\">\r\n\t\t\t<view class=\"issureComment\">\r\n\t\t\t\t<u-input :placeholder=\"'发表评论'\" :border=\"false\" :height=\"56\" :disabled=\"true\"\r\n\t\t\t\t\t@click=\"replyCommentFunc()\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"operationButton\">\r\n\t\t\t\t<view class=\"operationItem\" @click=\"gotoCommentFunc()\">\r\n\t\t\t\t\t<!-- 评论锚点 -->\r\n\t\t\t\t\t<u-icon name=\"chat\" color=\"#2979ff\" size=\"48\"></u-icon>\r\n\t\t\t\t\t<u-badge :count=\"total\" :offset='[10,10]'></u-badge>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"operationItem\" :class=\"{ highlight: vk.pubfn.isNotNull(comment.isLikeList) }\">\r\n\t\t\t\t\t<u-icon v-if=\"!vk.pubfn.isNotNull(comment.isLikeList)\" name=\"thumb-up\" class=\"like\" color=\"#2979ff\"\r\n\t\t\t\t\t\t:size=\"48\" @click=\"getLike(comment.isLikeList._id)\"></u-icon>\r\n\t\t\t\t\t<u-icon v-else name=\"thumb-up-fill\" class=\"like\" :size=\"48\" color=\"#2979ff\"\r\n\t\t\t\t\t\t@click=\"delLike(comment._id,comment.isLikeList._id)\">\r\n\t\t\t\t\t</u-icon>\r\n\t\t\t\t\t<u-badge :count=\"comment.loveNumber\" :offset='[10,10]'></u-badge>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"operationItem\">\r\n\t\t\t\t\t<!-- 分享 -->\r\n\t\t\t\t\t<u-icon name=\"zhuanfa\" color=\"#2979ff\" size=\"48\"></u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<u-back-top :scrollTop=\"scrollTop\" :z-index=\"999\"></u-back-top>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport config from '@/app.config.js'\r\n\tvar that; // 当前页面对象\r\n\tvar vk; // vk依赖\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toptions: {},\r\n\t\t\t\tcomment: {},\r\n\t\t\t\taddCommentPopup: {\r\n\t\t\t\t\tstatus: false, //添加评论弹出框\r\n\t\t\t\t\tcommentItem: {}, //评论父级内容\r\n\t\t\t\t\treplyText: '', //评论内容\r\n\t\t\t\t\tplaceholder: '发表评论'\r\n\t\t\t\t},\r\n\t\t\t\tpageIndex: 1, //当前页码\r\n\t\t\t\tpageSize: 20, //每页显示数量\r\n\t\t\t\ttotal: 0, //回复数\r\n\t\t\t\thasMore: false, //是否还有数据\r\n\t\t\t\treplyList: [], //回复列表\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(options = {}) {\r\n\t\t\tthat = this;\r\n\t\t\tvk = that.vk;\r\n\t\t\tthat.options = options;\r\n\t\t\tif (vk.pubfn.isNotNull(that.options.parent_comment_id) || vk.pubfn.isNotNull(that.options.wid)) {\r\n\t\t\t\tthat.getReply();\r\n\t\t\t\tthat.getFindById()\r\n\t\t\t} else {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: config.error.url\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tthat.scrollTop = e.scrollTop;\r\n\t\t},\r\n\t\t// 监听 - 页面下拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tuni.stopPullDownRefresh();\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\ttitle: this.$t('issure.allReply')\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 监听 - 页面触底部\r\n\t\tonReachBottom(options) {\r\n\t\t\tthat.nextPage();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取主评论\r\n\t\t\tgetFindById() {\r\n\t\t\t\tvk.callFunction({\r\n\t\t\t\t\turl: 'client/comment/kh/findById',\r\n\t\t\t\t\ttitle: '请求中...',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\twhereJson: {\r\n\t\t\t\t\t\t\t_id: that.options.parent_comment_id,\r\n\t\t\t\t\t\t\ttw_id: that.options.wid,\r\n\t\t\t\t\t\t\tstatus: 0\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsortArr: [{\r\n\t\t\t\t\t\t\t\"name\": \"_add_time\",\r\n\t\t\t\t\t\t\t\"type\": \"desc\"\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (vk.pubfn.isNotNull(res.rows)) {\r\n\t\t\t\t\t\t\tthat.comment = res.rows[0]\r\n\t\t\t\t\t\t} else {}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//滚动到评论列表\r\n\t\t\tgotoCommentFunc() {\r\n\t\t\t\tthat.$u.getRect('.all-reply').then(res => {\r\n\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\tscrollTop: that.scrollTop + res.top,\r\n\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 点赞\r\n\t\t\tgetLike(index) {\r\n\t\t\t\tif (index === 0 || index > 0) {\r\n\t\t\t\t\tthis.replyList[index].isLike = !this.replyList[index].isLike;\r\n\t\t\t\t\tif (this.replyList[index].isLike == true) {\r\n\t\t\t\t\t\tthis.replyList[index].likeNum++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.replyList[index].likeNum--;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.comment.isLike == true) {\r\n\t\t\t\t\t\tthis.comment.isLike = !this.comment.isLike;\r\n\t\t\t\t\t\tthis.comment.likeNum--;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.comment.isLike = !this.comment.isLike;\r\n\t\t\t\t\t\tthis.comment.likeNum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 加载下一页数据\r\n\t\t\tnextPage() {\r\n\t\t\t\tif (that.hasMore) {\r\n\t\t\t\t\tthat.pageIndex++;\r\n\t\t\t\t\tthat.getReply();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 回复列表\r\n\t\t\tgetReply() {\r\n\t\t\t\tvk.callFunction({\r\n\t\t\t\t\turl: 'client/comment/kh/getReplyList',\r\n\t\t\t\t\ttitle: '请求中...',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\twhereJson: {\r\n\t\t\t\t\t\t\tcomment_parent_status: true,\r\n\t\t\t\t\t\t\tparent_comment_id: that.options.parent_comment_id,\r\n\t\t\t\t\t\t\ttw_id: that.options.wid,\r\n\t\t\t\t\t\t\tstatus: 0\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsortArr: [{\r\n\t\t\t\t\t\t\t\"name\": \"_add_time\",\r\n\t\t\t\t\t\t\t\"type\": \"desc\"\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tpageIndex: that.pageIndex, //当前页码\r\n\t\t\t\t\t\tpageSize: that.pageSize, //每页显示数量\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (vk.pubfn.isNotNull(res.rows)) {\r\n\t\t\t\t\t\t\tthat.replyList = res.rows\r\n\t\t\t\t\t\t\tthat.hasMore = res.hasMore\r\n\t\t\t\t\t\t\tthat.total = res.total\r\n\t\t\t\t\t\t} else {}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 点击回复评论\r\n\t\t\treplyCommentFunc(commentItem) {\r\n\t\t\t\tconsole.log(commentItem)\r\n\t\t\t\tif (vk.pubfn.isNotNull(commentItem)) { //回复评论\r\n\t\t\t\t\tthat.addCommentPopup.commentItem = commentItem\r\n\t\t\t\t\tthat.addCommentPopup.placeholder = '回复' + commentItem.author.nickname + ''\r\n\t\t\t\t} else { //添加新评论\r\n\t\t\t\t\tthat.addCommentPopup.commentItem = {}\r\n\t\t\t\t\tthat.addCommentPopup.placeholder = ''\r\n\t\t\t\t}\r\n\t\t\t\tthat.addCommentPopup.status = true\r\n\t\t\t},\r\n\t\t\t//提交评论\r\n\t\t\treplyCommentSubmitFunc() {\r\n\t\t\t\tconsole.log('client/comment/kh/add')\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\ttw_id: that.options.wid, //图文ID\r\n\t\t\t\t\tcommentText: that.addCommentPopup.replyText || '', //描述\r\n\t\t\t\t\tcomment_parent_status: true,\r\n\t\t\t\t\tparent_uid: that.comment.uid || '',\r\n\t\t\t\t\tparent_comment_id: that.comment._id || '',\r\n\t\t\t\t}\r\n\t\t\t\tif (vk.pubfn.isNotNull(that.addCommentPopup.commentItem)) {\r\n\t\t\t\t\tparams.comment_reply_status = true;\r\n\t\t\t\t\tparams.reply_uid = that.addCommentPopup.commentItem.uid || '';\r\n\t\t\t\t\tparams.reply_comment_id = that.addCommentPopup.commentItem._id || '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparams.comment_reply_status = false;\r\n\t\t\t\t\tparams.reply_uid = '';\r\n\t\t\t\t\tparams.reply_comment_id = '';\r\n\t\t\t\t}\r\n\t\t\t\tvk.callFunction({\r\n\t\t\t\t\turl: 'client/comment/kh/add',\r\n\t\t\t\t\ttitle: '请求中...',\r\n\t\t\t\t\tdata: params,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (Number(res.code) === 0) {\r\n\t\t\t\t\t\t\tthat.addCommentPopupClose()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.getReply();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//关闭评论弹窗\r\n\t\t\taddCommentPopupClose() {\r\n\t\t\t\tthat.addCommentPopup = {\r\n\t\t\t\t\tstatus: false, //添加评论弹出框\r\n\t\t\t\t\tcommentItem: {}, //评论父级内容\r\n\t\t\t\t\treplyText: '', //评论内容\r\n\t\t\t\t\tplaceholder: '发表评论'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n</script>\r\n"],"sourceRoot":""}