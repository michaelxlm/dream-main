{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/xuliming/Documents/HBuilderProjects/dream-main/pages/tutorial/reply.vue?3405","webpack:////Users/xuliming/Documents/HBuilderProjects/dream-main/pages/tutorial/reply.vue?05c7","webpack:////Users/xuliming/Documents/HBuilderProjects/dream-main/pages/tutorial/reply.vue?580c","uni-app:///pages/tutorial/reply.vue"],"names":["createPage","Page"],"mappings":"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","file":"pages/tutorial/reply.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/tutorial/reply.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./reply.vue?vue&type=template&id=2e516132&\"\nvar renderjs\nimport script from \"./reply.vue?vue&type=script&lang=js&\"\nexport * from \"./reply.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tutorial/reply.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reply.vue?vue&type=template&id=2e516132&\"","var components\ntry {\n  components = {\n    uAvatar: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-avatar/u-avatar\" */ \"uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uGap: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-gap/u-gap\" */ \"uview-ui/components/u-gap/u-gap.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-popup/u-popup\" */ \"uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-input/u-input\" */ \"uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uBadge: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-badge/u-badge\" */ \"uview-ui/components/u-badge/u-badge.vue\"\n      )\n    },\n    uBackTop: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-back-top/u-back-top\" */ \"uview-ui/components/u-back-top/u-back-top.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.vk.pubfn.isNotNull(_vm.comment.author)\n  var g1 = _vm.vk.pubfn.dateDiff(_vm.comment._add_time)\n\n  var l0 = _vm.__map(_vm.replyList, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var g2 = _vm.vk.pubfn.isNotNull(item.author)\n    var g3 = _vm.vk.pubfn.dateDiff(item._add_time)\n    var g4 = _vm.vk.pubfn.isNotNull(item.isLikeList)\n    var g5 = _vm.vk.pubfn.isNotNull(item.isLikeList)\n    var g6 = _vm.vk.pubfn.isNotNull(item.reply._id)\n    var g7 = g6 ? _vm.vk.pubfn.isNotNull(item.reply.author) : null\n    return {\n      $orig: $orig,\n      g2: g2,\n      g3: g3,\n      g4: g4,\n      g5: g5,\n      g6: g6,\n      g7: g7\n    }\n  })\n\n  var g8 = _vm.vk.pubfn.isNotNull(_vm.comment.isLikeList)\n  var g9 = _vm.vk.pubfn.isNotNull(_vm.comment.isLikeList)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n        g8: g8,\n        g9: g9\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./reply.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"detailCompontent\">\n\t\t<view class=\"commentReply\">\n\t\t\t<view class=\"top\">\n\t\t\t\t<view class=\"left\">\n\t\t\t\t\t<view class=\"heart-photo\">\n\t\t\t\t\t\t<u-avatar :src=\"comment.author.avatar||mainLogo\">\n\t\t\t\t\t\t</u-avatar>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"user-info\">\n\t\t\t\t\t\t<view class=\"name\">{{ vk.pubfn.isNotNull(comment.author)?comment.author.nickname:'匿名' }}</view>\n\t\t\t\t\t\t<view class=\"date\">{{vk.pubfn.dateDiff(comment._add_time)}}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"content\">{{ comment.commentText }}</view>\n\t\t</view>\n\t\t<view class=\"all-reply\">\n\t\t\t<u-gap height=\"10\" bg-color=\"#ececec\"></u-gap>\n\t\t\t<view class=\"all-reply-top\">全部回复（{{ total||0 }}）</view>\n\t\t\t<view class=\"item\" v-for=\"(item, index) in replyList\" :key=\"index\">\n\t\t\t\t<view class=\"commentReply\">\n\t\t\t\t\t<view class=\"top\">\n\t\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t\t<view class=\"heart-photo\">\n\t\t\t\t\t\t\t\t<u-avatar :src=\"item.author.avatar||mainLogo\" :size=\"64\">\n\t\t\t\t\t\t\t\t</u-avatar>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"user-info\">\n\t\t\t\t\t\t\t\t<view class=\"name\">{{ vk.pubfn.isNotNull(item.author)?item.author.nickname:'匿名' }}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"date\">{{vk.pubfn.dateDiff(item._add_time)}}\n\t\t\t\t\t\t\t\t\t<view class=\"replyButton\" @click=\"replyCommentFunc(item)\">回复</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"right\" :class=\"{ highlight: vk.pubfn.isNotNull(item.isLikeList)}\">\n\t\t\t\t\t\t\t<view class=\"num\">{{ item.loveNumber ||0 }}</view>\n\t\t\t\t\t\t\t<u-icon v-if=\"!vk.pubfn.isNotNull(item.isLikeList)\" name=\"thumb-up\" class=\"like\" :size=\"30\"\n\t\t\t\t\t\t\t\tcolor=\"#9a9a9a\" @click=\"getLike(item._id)\"></u-icon>\n\t\t\t\t\t\t\t<u-icon v-else name=\"thumb-up-fill\" class=\"like\" :size=\"30\"\n\t\t\t\t\t\t\t\t@click=\"delLike(item._id,item.isLikeList._id)\"></u-icon>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"reply\" v-if=\"vk.pubfn.isNotNull(item.reply._id)\">\n\t\t\t\t\t\t<view class=\"username\">\n\t\t\t\t\t\t\t{{ vk.pubfn.isNotNull(item.reply.author)?item.reply.author.nickname:'匿名' }}:\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"text\">{{ item.reply.commentText }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"content\">{{ item.commentText }}</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<u-popup v-model=\"addCommentPopup.status\" mode=\"bottom\" safe-area-inset-bottom=\"true\" border-radius=\"14\" height=\"180\">\n\t\t\t<view class=\"addCommentPopup\">\n\t\t\t\t<view class=\"issureCommentText\">\n\t\t\t\t\t<u-input v-model=\"addCommentPopup.replyText\" type=\"textarea\" :border=\"false\" :height=\"100\"\n\t\t\t\t\t\t:auto-height=\"true\" :focus=\"true\" :placeholder=\"addCommentPopup.placeholder\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"issureCommentButton\" @click=\"replyCommentSubmitFunc()\">发表</view>\n\t\t\t</view>\n\t\t</u-popup>\n\t\t<view class=\"operationNavigation\">\n\t\t\t<view class=\"issureComment\">\n\t\t\t\t<u-input :placeholder=\"'发表评论'\" :border=\"false\" :height=\"56\" :disabled=\"true\"\n\t\t\t\t\t@click=\"replyCommentFunc()\" />\n\t\t\t</view>\n\t\t\t<view class=\"operationButton\">\n\t\t\t\t<view class=\"operationItem\" @click=\"gotoCommentFunc()\">\n\t\t\t\t\t<!-- 评论锚点 -->\n\t\t\t\t\t<u-icon name=\"chat\" color=\"#2979ff\" size=\"48\"></u-icon>\n\t\t\t\t\t<u-badge :count=\"total\" :offset='[10,10]'></u-badge>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"operationItem\" :class=\"{ highlight: vk.pubfn.isNotNull(comment.isLikeList) }\">\n\t\t\t\t\t<u-icon v-if=\"!vk.pubfn.isNotNull(comment.isLikeList)\" name=\"thumb-up\" class=\"like\" color=\"#2979ff\"\n\t\t\t\t\t\t:size=\"48\" @click=\"getLike(comment._id)\"></u-icon>\n\t\t\t\t\t<u-icon v-else name=\"thumb-up-fill\" class=\"like\" :size=\"48\" color=\"#2979ff\"\n\t\t\t\t\t\t@click=\"delLike(comment._id,comment.isLikeList._id)\">\n\t\t\t\t\t</u-icon>\n\t\t\t\t\t<u-badge :count=\"comment.loveNumber ||0\" :offset='[10,10]'></u-badge>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"operationItem\">\n\t\t\t\t\t<!-- 分享 -->\n\t\t\t\t\t<button :hair-line=\"false\" open-type=\"share\" class=\"noStyleButtom\">\n\t\t\t\t\t\t<u-icon name=\"zhuanfa\" color=\"#2979ff\" size=\"48\"></u-icon>\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<u-back-top :scrollTop=\"scrollTop\" :z-index=\"999\"></u-back-top>\n\t</view>\n</template>\n\n<script>\n\timport config from '@/app.config.js'\n\tvar that; // 当前页面对象\n\tvar vk; // vk依赖\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdbName: 'tw',\n\t\t\t\toptions: {},\n\t\t\t\tcomment: {},\n\t\t\t\taddCommentPopup: {\n\t\t\t\t\tstatus: false, //添加评论弹出框\n\t\t\t\t\tcommentItem: {}, //评论父级内容\n\t\t\t\t\treplyText: '', //评论内容\n\t\t\t\t\tplaceholder: '发表评论'\n\t\t\t\t},\n\t\t\t\tpageIndex: 1, //当前页码\n\t\t\t\tpageSize: 20, //每页显示数量\n\t\t\t\ttotal: 0, //回复数\n\t\t\t\thasMore: false, //是否还有数据\n\t\t\t\treplyList: [], //回复列表\n\t\t\t\tscrollTop: 0,\n\t\t\t};\n\t\t},\n\t\tonLoad(options = {}) {\n\t\t\tthat = this;\n\t\t\tvk = that.vk;\n\t\t\tthat.options = options;\n\t\t\tif (vk.pubfn.isNotNull(that.options.parent_comment_id) || vk.pubfn.isNotNull(that.options.wid)) {\n\t\t\t\tthat.getReply('init');\n\t\t\t\tthat.getFindById()\n\t\t\t} else {\n\t\t\t\tuni.redirectTo({\n\t\t\t\t\turl: config.error.url\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonPageScroll(e) {\n\t\t\tthat.scrollTop = e.scrollTop;\n\t\t},\n\t\t// 监听 - 页面下拉刷新\n\t\tonPullDownRefresh() {\n\t\t\tsetTimeout(function() {\n\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t}, 1000);\n\t\t},\n\t\tonShow() {\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t\ttitle: this.$t('issure.allReply')\n\t\t\t});\n\t\t},\n\t\t// 监听 - 页面触底部\n\t\tonReachBottom(options) {\n\t\t\tconsole.log(options)\n\t\t\tconsole.log('监听 - 页面触底部')\n\t\t\tif (that.hasMore) {\n\t\t\t\tthat.pageIndex += 1\n\t\t\t\tthat.getReply('more')\n\t\t\t}\n\t\t\n\t\t},\n\t\t// 计算属性\n\t\tcomputed: {\n\t\t\tmainLogo() {\n\t\t\t\treturn config.staticUrl.logo\n\t\t\t},\n\t\t\tuserInfo() {\n\t\t\t\tconsole.log('userInfo')\n\t\t\t\treturn this.vk.getVuex('$user.userInfo') || {}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t// 获取主评论\n\t\t\tgetFindById() {\n\t\t\t\tvk.callFunction({\n\t\t\t\t\turl: 'client/general/pub/getList',\n\t\t\t\t\ttitle: '请求中...',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdbName: that.dbName + '_comment',\n\t\t\t\t\t\tgetOne: true,\n\t\t\t\t\t\twhereJson: {\n\t\t\t\t\t\t\t_id: that.options.parent_comment_id,\n\t\t\t\t\t\t\ttw_id: that.options.wid,\n\t\t\t\t\t\t\tstatus: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsortArr: [{\n\t\t\t\t\t\t\t\"name\": \"_add_time\",\n\t\t\t\t\t\t\t\"type\": \"desc\"\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tforeignDB: [{\n\t\t\t\t\t\t\tdbName: \"uni-id-users\",\n\t\t\t\t\t\t\tlocalKey: \"uid\",\n\t\t\t\t\t\t\tforeignKey: \"_id\",\n\t\t\t\t\t\t\tas: \"author\",\n\t\t\t\t\t\t\twhereJson: {},\n\t\t\t\t\t\t\tlimit: 1\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tdbName: \"tw_comment_like\",\n\t\t\t\t\t\t\tlocalKey: \"_id\",\n\t\t\t\t\t\t\tforeignKey: \"comment_id\",\n\t\t\t\t\t\t\twhereJson: {\n\t\t\t\t\t\t\t\tuid: that.userInfo._id,\n\t\t\t\t\t\t\t\tstatus: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tas: \"isLikeList\",\n\t\t\t\t\t\t\tsortArr: [{\n\t\t\t\t\t\t\t\t\"name\": \"_add_time\",\n\t\t\t\t\t\t\t\t\"type\": \"desc\"\n\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\tlimit: 1\n\t\t\t\t\t\t}]\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif (vk.pubfn.isNotNull(res.rows)) {\n\t\t\t\t\t\t\tthat.comment = res.rows\n\t\t\t\t\t\t} else {}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//滚动到评论列表\n\t\t\tgotoCommentFunc() {\n\t\t\t\tthat.$u.getRect('.all-reply').then(res => {\n\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t\tscrollTop: that.scrollTop + res.top,\n\t\t\t\t\t\tduration: 0\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 评论点赞\n\t\t\tgetLike(comment_id) {\n\t\t\t\tvk.callFunction({\n\t\t\t\t\turl: 'client/general/kh/addLove',\n\t\t\t\t\ttitle: '请求中...',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmainDBname: that.dbName,\n\t\t\t\t\t\tdbName: that.dbName + '_comment',\n\t\t\t\t\t\ttw_id: that.wid, //图文ID\n\t\t\t\t\t\tfrom: 'comment',\n\t\t\t\t\t\tcomment_id: comment_id, //描述\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif (!vk.pubfn.isNull(res.id)) {\n\t\t\t\t\t\t\tthat.getReply('init');\n\t\t\t\t\t\t\tthat.getFindById();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvk.toast(res.msg, \"none\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 取消评论点赞\n\t\t\tdelLike(comment_id, comment_like_id) {\n\t\t\t\tvk.callFunction({\n\t\t\t\t\turl: 'client/general/kh/delLove',\n\t\t\t\t\ttitle: '请求中...',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmainDBname: that.dbName,\n\t\t\t\t\t\tdbName: that.dbName + '_comment',\n\t\t\t\t\t\ttw_id: that.wid, //图文ID\n\t\t\t\t\t\tfrom: 'comment',\n\t\t\t\t\t\tcomment_id: comment_id, //描述\n\t\t\t\t\t\tlike_id: comment_like_id\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif (!vk.pubfn.isNull(res.id)) {\n\t\t\t\t\t\t\tthat.getReply('init');\n\t\t\t\t\t\t\tthat.getFindById();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvk.toast(res.msg, \"none\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 回复列表\n\t\t\tgetReply(ele) {\n\t\t\t\tif (ele === 'init') {\n\t\t\t\t\tthat.pageIndex = 1\n\t\t\t\t}\n\t\t\t\tvk.callFunction({\n\t\t\t\t\turl: 'client/general/pub/getList',\n\t\t\t\t\ttitle: '请求中...',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdbName: that.dbName + '_comment',\n\t\t\t\t\t\twhereJson: {\n\t\t\t\t\t\t\tcomment_parent_status: true,\n\t\t\t\t\t\t\tparent_comment_id: that.options.parent_comment_id,\n\t\t\t\t\t\t\ttw_id: that.options.wid,\n\t\t\t\t\t\t\tstatus: 0\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetCount: true,\n\t\t\t\t\t\tsortArr: [{\n\t\t\t\t\t\t\t\"name\": \"_add_time\",\n\t\t\t\t\t\t\t\"type\": \"desc\"\n\t\t\t\t\t\t}],\n\t\t\t\t\t\ttreeProps: {\n\t\t\t\t\t\t\tid: \"reply_comment_id\", // 唯一标识字段，默认为 _id\n\t\t\t\t\t\t\tparent_id: \"_id\", // 父级标识字段，默认为 parent_id\n\t\t\t\t\t\t\tchildren: \"reply\", // 自定义返回的下级字段名，默认为 children\n\t\t\t\t\t\t\tlevel: 2, // 查询返回的树的最大层级。超过设定层级的节点不会返回。默认10级，最大20，最小1\n\t\t\t\t\t\t\tlimit: 1, // 每一级最大返回的数据。\n\t\t\t\t\t\t\twhereJson: {\n\t\t\t\t\t\t\t\tstatus: 0\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tforeignDB: [{\n\t\t\t\t\t\t\t\tdbName: \"uni-id-users\",\n\t\t\t\t\t\t\t\tlocalKey: \"uid\",\n\t\t\t\t\t\t\t\tforeignKey: \"_id\",\n\t\t\t\t\t\t\t\tas: \"author\",\n\t\t\t\t\t\t\t\tlimit: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdbName: \"tw_comment_like\",\n\t\t\t\t\t\t\t\tlocalKey: \"_id\",\n\t\t\t\t\t\t\t\tforeignKey: \"comment_id\",\n\t\t\t\t\t\t\t\twhereJson: {\n\t\t\t\t\t\t\t\t\tuid: that.userInfo._id,\n\t\t\t\t\t\t\t\t\tstatus: 0,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tas: \"isLikeList\",\n\t\t\t\t\t\t\t\tsortArr: [{\n\t\t\t\t\t\t\t\t\t\"name\": \"_add_time\",\n\t\t\t\t\t\t\t\t\t\"type\": \"desc\"\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\tlimit: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tpageIndex: that.pageIndex, //当前页码\n\t\t\t\t\t\tpageSize: that.pageSize, //每页显示数量\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif (ele === 'init') {\n\t\t\t\t\t\t\tthat.replyList = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (vk.pubfn.isNotNull(res.rows)) {\n\t\t\t\t\t\t\tthat.replyList = res.rows\n\t\t\t\t\t\t\tthat.hasMore = res.hasMore\n\t\t\t\t\t\t\tthat.total = res.total\n\t\t\t\t\t\t} else {}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 点击回复评论\n\t\t\treplyCommentFunc(commentItem) {\n\t\t\t\tconsole.log(commentItem)\n\t\t\t\tif (vk.pubfn.isNotNull(commentItem)) { //回复评论\n\t\t\t\t\tthat.addCommentPopup.commentItem = commentItem\n\t\t\t\t\tthat.addCommentPopup.placeholder = '回复' + commentItem.author.nickname + ''\n\t\t\t\t} else { //添加新评论\n\t\t\t\t\tthat.addCommentPopup.commentItem = {}\n\t\t\t\t\tthat.addCommentPopup.placeholder = ''\n\t\t\t\t}\n\t\t\t\tthat.addCommentPopup.status = true\n\t\t\t},\n\t\t\t//提交评论\n\t\t\treplyCommentSubmitFunc() {\n\t\t\t\tlet params = {\n\t\t\t\t\tstatus:0,\n\t\t\t\t\ttw_id: that.options.wid, //图文ID\n\t\t\t\t\tcommentText: that.addCommentPopup.replyText || '', //描述\n\t\t\t\t\tcomment_parent_status: true,\n\t\t\t\t\tparent_uid: that.comment.uid || '',\n\t\t\t\t\tparent_comment_id: that.comment._id || '',\n\t\t\t\t}\n\t\t\t\tif (vk.pubfn.isNotNull(that.addCommentPopup.commentItem)) {\n\t\t\t\t\tparams.comment_reply_status = true;\n\t\t\t\t\tparams.reply_uid = that.addCommentPopup.commentItem.uid || '';\n\t\t\t\t\tparams.reply_comment_id = that.addCommentPopup.commentItem._id || '';\n\t\t\t\t} else {\n\t\t\t\t\tparams.comment_reply_status = false;\n\t\t\t\t\tparams.reply_uid = '';\n\t\t\t\t\tparams.reply_comment_id = '';\n\t\t\t\t}\n\t\t\t\tvk.callFunction({\n\t\t\t\t\turl: 'client/general/kh/adds',\n\t\t\t\t\ttitle: '请求中...',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taddJson: params,\n\t\t\t\t\t\tdbName: that.dbName + '_comment',\n\t\t\t\t\t\tmainDBname: \"tw\",\n\t\t\t\t\t\ttype: \"comment\"\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif (Number(res.code) === 0) {\n\t\t\t\t\t\t\tthat.addCommentPopupClose()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthat.getReply('init');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//关闭评论弹窗\n\t\t\taddCommentPopupClose() {\n\t\t\t\tthat.addCommentPopup = {\n\t\t\t\t\tstatus: false, //添加评论弹出框\n\t\t\t\t\tcommentItem: {}, //评论父级内容\n\t\t\t\t\treplyText: '', //评论内容\n\t\t\t\t\tplaceholder: '发表评论'\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t};\n</script>\n"],"sourceRoot":""}