{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/xuliming/Documents/HBuilderProjects/dream-main/pages/mine/info.vue?24af","webpack:////Users/xuliming/Documents/HBuilderProjects/dream-main/pages/mine/info.vue?a90e","webpack:////Users/xuliming/Documents/HBuilderProjects/dream-main/pages/mine/info.vue?29f3","uni-app:///pages/mine/info.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;AACnB;AACA,0F;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0Ct1B,wF;AACA;AACA;AACA,O;AACA;AACA,gBADA;AAEA,MAFA,kBAEA;AACA;AACA;AACA,kBADA;AAEA,kBAFA;;AAIA;AACA,kBADA;AAEA,iBAFA,EAJA;AAOA;AACA,kBADA;AAEA,iBAFA,EAPA,CADA;;;AAaA,yBAbA,EAaA;AACA,kBAdA;;AAgBA,GAnBA;AAoBA;AACA,cADA,wBACA;AACA;AACA,4BADA;;AAGA,KALA;AAMA,YANA,sBAMA;AACA;AACA,KARA,EApBA;;AA8BA,QA9BA,oBA8BA;AACA;AACA;AACA;AACA;AACA,oCADA;;AAGA;AACA;AACA;AACA,wBAFA,GAEA,EAFA;AAGA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA,yBARA,GAQA,kDARA;AASA;AACA,kCADA;AAEA,wCAFA;AAGA;AACA;AACA;AACA,yCADA;AAEA,qBAPA,GATA,SASA,MATA;;AAkBA,2DAlBA;;AAoBA,GA1DA;AA2DA,QA3DA,oBA2DA;AACA;AACA,GA7DA;AA8DA;AACA,QADA,kBACA;AACA;AACA;AACA,KAJA;AAKA,gBALA,0BAKA;AACA;AACA;AACA;AACA,uDAFA;AAGA;AACA;AACA;AACA,wBAFA;AAGA;AACA,wBAJA;AAKA;AACA,yBANA,EAJA;;;AAaA,KApBA;AAqBA,oBArBA,8BAqBA;AACA;AACA,KAvBA;AAwBA;AACA,kBAzBA,0BAyBA,CAzBA,EAyBA;AACA;AACA;AACA,KA5BA;AA6BA,cA7BA,wBA6BA;AACA;AACA;AACA,0CADA;AAEA,sCAFA;AAGA,sCAHA;AAIA,oCAJA;AAKA,sCALA;AAMA,wCANA;AAOA,0CAPA;AAQA,gDARA,EADA;;AAWA;AACA;AACA;AACA,yBADA;AAEA,wBAFA;AAGA,0BAHA;AAIA;AACA;AACA,aANA;;;AASA,SAtBA;;AAwBA,KAtDA,EA9DA,E","file":"pages/mine/info.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/mine/info.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./info.vue?vue&type=template&id=24fbc87e&\"\nvar renderjs\nimport script from \"./info.vue?vue&type=script&lang=js&\"\nexport * from \"./info.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mine/info.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=template&id=24fbc87e&\"","var components\ntry {\n  components = {\n    uImage: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-image/u-image\" */ \"uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uForm: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-form/u-form\" */ \"uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    uFormItem: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-form-item/u-form-item\" */ \"uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-input/u-input\" */ \"uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uRadioGroup: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-radio-group/u-radio-group\" */ \"uview-ui/components/u-radio-group/u-radio-group.vue\"\n      )\n    },\n    uRadio: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-radio/u-radio\" */ \"uview-ui/components/u-radio/u-radio.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uCalendar: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-calendar/u-calendar\" */ \"uview-ui/components/u-calendar/u-calendar.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$t(\"mine.update\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"mainForm\">\r\n\t\t<!-- 头部logo -->\r\n\t\t<view class=\"headerLogo\">\r\n\t\t\t<view @click=\"chooseAvatar()\" class=\"editImgView\">\r\n\t\t\t\t<u-image class=\"editImg\" :src=\"infoForm.avatar || mainLogo\" mode=\"aspectFill\" shape=\"circle\"\r\n\t\t\t\t\t:width=\"160\" :height=\"160\" :show-error=\"false\" :show-loading=\"false\" />\r\n\t\t\t\t<u-icon name=\"edit-pen\" size=\"40\" class=\"editImgIcon\"></u-icon>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<u-form :model=\"infoForm\" ref=\"infoForm\" label-width=\"160\" label-style={labelStyle}>\r\n\t\t\t<u-form-item label=\"姓名\">\r\n\t\t\t\t<u-input v-model=\"infoForm.nickname\" />\r\n\t\t\t</u-form-item>\r\n\t\t\t<u-form-item label=\"性别\">\r\n\t\t\t\t<u-radio-group v-model=\"infoForm.gender\">\r\n\t\t\t\t\t<u-radio v-for=\"(item, index) in genderList\" :key=\"index\" :name=\"item.value\">\r\n\t\t\t\t\t\t{{item.name}}\r\n\t\t\t\t\t</u-radio>\r\n\t\t\t\t</u-radio-group>\r\n\t\t\t</u-form-item>\r\n\t\t\t<u-form-item label=\"手机号\">\r\n\t\t\t\t<u-input v-model=\"infoForm.mobile\" />\r\n\t\t\t</u-form-item>\r\n\t\t\t<!-- <u-form-item label=\"微信号\">\r\n\t\t\t\t<u-input v-model=\"infoForm.wx_code\" />\r\n\t\t\t</u-form-item> -->\r\n\t\t\t<!-- <u-form-item label=\"生日\">\r\n\t\t\t\t<view @click=\"calendarShowFunc()\">{{infoForm.birthday||'请选择生日'}}</view>\r\n\t\t\t</u-form-item> -->\r\n\t\t\t<u-form-item label=\"介绍\">\r\n\t\t\t\t<u-input v-model=\"infoForm.intro\" />\r\n\t\t\t</u-form-item>\r\n\t\t</u-form>\r\n\t\t<u-button shape=\"circle\" @click=\"submitInfo()\" :plain=\"false\" :hair-line=\"false\" type=\"success\">\r\n\t\t\t{{$t('mine.update')}}\r\n\t\t</u-button>\r\n\t\t<u-calendar v-model=\"calendarShow\" mode=\"date\" @change=\"calendarChange()\"></u-calendar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport config from '@/app.config.js'\r\n\tvar that;\r\n\tvar app = getApp();\r\n\tvar vk;\r\n\texport default {\r\n\t\tcomponents: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tgenderList: [{\r\n\t\t\t\t\t\tvalue: '0',\r\n\t\t\t\t\t\tname: '保密'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: '1',\r\n\t\t\t\t\t\tname: '男'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tvalue: '2',\r\n\t\t\t\t\t\tname: '女'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcalendarShow: false, //日历打开\r\n\t\t\t\tinfoForm: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tlabelStyle() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttextAlign: 'justify',\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmainLogo() {\r\n\t\t\t\treturn config.staticUrl.logo\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options = {}) {\r\n\t\t\tthat = this;\r\n\t\t\tthat.options = options\r\n\t\t\tvk = that.vk;\r\n\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\ttitle: that.$t('mine.setting')\r\n\t\t\t});\r\n\t\t\tthat.init();\r\n\t\t\tuni.$on('uAvatarCropper', async (path) => {\r\n\t\t\t\t// 可以在此上传到服务端\r\n\t\t\t\tlet filename = ''\r\n\t\t\t\tif (path.indexOf(\"/\") > 0) { //如果包含有\"/\"号 从最后一个\"/\"号+1的位置开始截取字符串\r\n\t\t\t\t\tfilename = path.substring(path.lastIndexOf(\"/\") + 1, path.length);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilename = path;\r\n\t\t\t\t}\r\n\t\t\t\tlet cloudPath = '/useAvatar/' + that.infoForm._id + '/' + filename\r\n\t\t\t\tconst result = await uniCloud.uploadFile({\r\n\t\t\t\t\tfilePath: path,\r\n\t\t\t\t\tcloudPath: cloudPath,\r\n\t\t\t\t\tonUploadProgress: function(progressEvent) {\r\n\t\t\t\t\t\tconsole.log(progressEvent)\r\n\t\t\t\t\t\tvar percentCompleted = Math.round((progressEvent.loaded * 100) /\r\n\t\t\t\t\t\t\tprogressEvent.total)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthat.infoForm.avatar = result.fileID || ''\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthat.init();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit() {\r\n\t\t\t\tlet use = vk.getVuex('$user.userInfo');\r\n\t\t\t\tthat.infoForm = use\r\n\t\t\t},\r\n\t\t\tchooseAvatar() {\r\n\t\t\t\t// 此为uView的跳转方法，详见\"文档-JS\"部分，也可以用uni的uni.navigateTo\r\n\t\t\t\tthis.$u.route({\r\n\t\t\t\t\t// 关于此路径，请见下方\"注意事项\"\r\n\t\t\t\t\turl: '/pages/u-avatar-cropper/u-avatar-cropper',\r\n\t\t\t\t\t// 内部已设置以下默认参数值，可不传这些参数\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t// 输出图片宽度，高等于宽，单位px\r\n\t\t\t\t\t\tdestWidth: 300,\r\n\t\t\t\t\t\t// 裁剪框宽度，高等于宽，单位px\r\n\t\t\t\t\t\trectWidth: 200,\r\n\t\t\t\t\t\t// 输出的图片类型，如果'png'类型发现裁剪的图片太大，改成\"jpg\"即可\r\n\t\t\t\t\t\tfileType: 'jpg',\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcalendarShowFunc() {\r\n\t\t\t\tthat.calendarShow = !that.calendarShow\r\n\t\t\t},\r\n\t\t\t// 选择生日发生改变时触发\r\n\t\t\tcalendarChange(e) {\r\n\t\t\t\tthat.infoForm.birthday = e.result\r\n\t\t\t\tthat.infoForm.birthdayObj = e\r\n\t\t\t},\r\n\t\t\tsubmitInfo() {\r\n\t\t\t\tvk.userCenter.updateUser({\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tnickname: that.infoForm.nickname,\r\n\t\t\t\t\t\tavatar: that.infoForm.avatar,\r\n\t\t\t\t\t\tgender: that.infoForm.gender,\r\n\t\t\t\t\t\tintro: that.infoForm.intro,\r\n\t\t\t\t\t\tmobile: that.infoForm.mobile,\r\n\t\t\t\t\t\twx_code: that.infoForm.wx_code,\r\n\t\t\t\t\t\tbirthday: that.infoForm.birthday,\r\n\t\t\t\t\t\tbirthdayObj: that.infoForm.birthdayObj\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\tvk.setVuex('$user.userInfo', data.userInfo);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '更新成功',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t\t\tvk.redirectTo('/pages/mine/index');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\n"],"sourceRoot":""}