
### 关于事务的一些问题解答以及注意事项
### 作者：VK
### 更新时间：2021-02-24

### 以下结论皆是我通过大量测试总结出来的，如有错误，请指正。

### 场景1
#### 操作：两个不同的事务`同时`去修改同一个表的`同一个doc`
#### 结果：其中有1个事务必定会报异常。
#### 结论：使用事务后，该doc会加写入锁，当另一个事务要去修改这个doc时，会直接报写入冲突异常。
#### （如果不是同时，A事务已经提交后，B事务才进行修改，则不会报错）

### 场景2
#### 操作：两个不同的事务`同时`去修改同一个表的`不同的doc`
#### 结果：没有异常，全部成功
#### 结论：事务只会把修改的doc加写入锁，不会整个表都加锁。

### 场景3
#### 操作：一个事务修改其中一个表的doc，且迟迟未提交，同一时间另外一个未使用事务去修改`相同的doc`
#### 结果：未使用事务的有几率报数据库超时异常。
#### 结论：当一个doc已经被事务修改，但未提交，则未使用事务的进程会一直等待事务提交后才进行。此时如果事务一直未提交，未使用事务的那个进程会报数据库超时异常。


### uniCloud云函数路由框架研究Q群:22466457 如有问题或建议可以在群内讨论。
